<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SmartFilter</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <header class="header">
      <h1>Smart<span>Filter</span></h1>
      <p class="header-tagline">Find what you're looking for, naturally</p>
    </header>

    <main class="main">
      <section id="site-status" class="status-section">
        <div id="status-icon" class="status-icon" aria-hidden="true"></div>
        <div class="status-text">
          <h3>Current site: <span id="current-site">Checking...</span></h3>
          <p id="site-message">Detecting compatible e-commerce site...</p>
        </div>
      </section>

      <section id="filter-panel" class="panel" style="display: none">
        <h2 class="panel-title">Filters</h2>
        <div id="filter-list" class="filter-list"></div>
        <button id="add-filter-btn" class="btn btn-add">
          <svg
            class="btn-icon"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M12 4.5v15m7.5-7.5h-15"
            />
          </svg>
          Add Filter
        </button>

        <h2 class="panel-title">Settings</h2>

        <div class="setting">
          <div class="setting-header">
            <label for="max-items">Products to analyze</label>
            <div
              class="tooltip"
              data-tip="Controls how many products will be analyzed. Higher values give more results but take longer."
            ></div>
          </div>
          <div class="number-input">
            <input type="number" id="max-items" min="1" max="10" value="5" />
            <div class="number-buttons">
              <button id="increase-max">▲</button>
              <button id="decrease-max">▼</button>
            </div>
          </div>
        </div>

        <div class="setting">
          <div class="setting-header">
            <label for="filter-threshold">Filter match requirement</label>
            <div
              class="tooltip"
              data-tip="Products must match at least this many criteria to be highlighted."
            ></div>
          </div>
          <div class="slider-container">
            <input
              type="range"
              id="filter-threshold"
              min="0"
              max="5"
              value="1"
            />
            <span id="threshold-value" class="value-display"
              >At least 1 criterion</span
            >
          </div>
        </div>

        <div class="actions">
          <button id="apply-btn" class="btn btn-primary">
            <svg
              class="btn-icon"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
              />
            </svg>
            Apply Filters
          </button>
          <button id="reset-btn" class="btn btn-secondary">
            <svg
              class="btn-icon"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"
              />
            </svg>
            Reset
          </button>
        </div>

        <div id="results-counter" class="results-counter">
          <span>No filters applied yet</span>
        </div>
      </section>

      <div class="settings-link-container">
        <button id="toggle-advanced" class="settings-toggle">
          <svg
            class="icon-settings"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <circle cx="12" cy="12" r="3"></circle>
            <path
              d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"
            ></path>
          </svg>
          <span>Advanced Settings</span>
          <svg
            class="icon-chevron"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <polyline points="6 9 12 15 18 9"></polyline>
          </svg>
        </button>
      </div>

      <section id="advanced-panel" class="panel" style="display: none">
        <h2 class="panel-title">Advanced Settings</h2>

        <div class="setting">
          <div class="setting-header">
            <div class="setting-label-with-icon">
              <img
                src="../images/server-icon.svg"
                alt="Server"
                class="setting-icon"
              />
              <label for="api-endpoint">API Endpoint</label>
            </div>
            <div
              class="tooltip"
              data-tip="The base URL of the backend API. Use localhost:8000 for local development or your deployed URL."
            ></div>
          </div>
          <input
            type="text"
            id="api-endpoint"
            placeholder="http://localhost:8000"
            class="text-input"
          />
        </div>

        <div class="setting">
          <div class="setting-header">
            <label for="api-key">API Key</label>
            <div
              class="tooltip"
              data-tip="API key for authentication (if required). Leave empty for local development."
            ></div>
          </div>
          <input
            type="password"
            id="api-key"
            placeholder="Optional"
            class="text-input"
          />
        </div>

        <button id="save-api-settings" class="btn btn-primary">
          Save Settings
        </button>

        <div id="api-settings-status" class="settings-status"></div>
      </section>
    </main>

    <footer class="footer">
      <div class="footer-author">
        <span>Made by Daniel Altunay</span>
      </div>
      <div class="social-links">
        <a
          href="https://github.com/daltunay/ecommerce-smart-filtering"
          target="_blank"
          class="social-link"
        >
          <img src="../images/github.png" alt="GitHub" />
        </a>
        <a
          href="https://www.linkedin.com/in/daltunay/"
          target="_blank"
          class="social-link"
        >
          <img src="../images/linkedin.png" alt="LinkedIn" />
        </a>
      </div>
    </footer>

    <script src="popup.js"></script>
  </body>
</html>
